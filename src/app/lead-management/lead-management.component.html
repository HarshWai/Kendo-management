<div class="d-flex justify-content-between align-items-center">
    <div class="d-flex">
        <h1 class="header-title me-3">Lead Management</h1>
        <p class="header-subtitle g">Leads</p>
    </div>
    <!-- Board View Checkbox and Buttons -->
    <div class="header-actions d-flex align-items-center">
        <label class="me-3">
            <input type="checkbox"> Board View
        </label>

        <button kendoButton (click)="exportToExcel()" [icon]="'file-excel'"
            [primary]="true" class="button button-export">Export to
            Excel</button>
        <button class="button button-create"
            (click)="onCreate()">Create</button>

    </div>
</div>

<!-- Converted toolbar to Bootstrap and moved outside of Kendo Grid -->
<div class="d-flex flex-wrap align-items-center mb-3">
    <!-- Left Section: Filters and Search -->
    <div class="d-flex align-items-center flex-wrap me-auto">
        <!-- Dropdown for Leads -->
        <div class="dropdown me-3 border rounded">
            <button class="btn dropdown-toggle" type="button"
                id="dropdownMenuButton" data-bs-toggle="dropdown"
                aria-expanded="false">
                {{ selectedLeadValue || 'All Leads' }}
            </button>
            <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <li><a class="dropdown-item" href="#"
                        (click)="selectLead('Lead 1')">Lead 1</a></li>
                <li><a class="dropdown-item" href="#"
                        (click)="selectLead('Lead 2')">Lead 2</a></li>
                <li><a class="dropdown-item" href="#"
                        (click)="selectLead('Lead 3')">Lead 3</a></li>
            </ul>
        </div>

        <!-- Dropdown for Preferences -->
        <div class="dropdown me-3 border rounded">
            <button class="btn dropdown-toggle" type="button"
                id="dropdownPreferences" data-bs-toggle="dropdown"
                aria-expanded="false">
                {{ selectedPreference || 'Select Saved Preferences' }}
            </button>
            <ul class="dropdown-menu" aria-labelledby="dropdownPreferences">
                <li><a class="dropdown-item" href="#"
                        (click)="selectPreference('Preference 1')">Preference
                        1</a></li>
                <li><a class="dropdown-item" href="#"
                        (click)="selectPreference('Preference 2')">Preference
                        2</a></li>
                <li><a class="dropdown-item" href="#"
                        (click)="selectPreference('Preference 3')">Preference
                        3</a></li>
            </ul>
        </div>

        <!-- Search Input -->
        <div class="input-group me-3" style="width: 185px;">
            <input type="text" class="form-control"
                placeholder="Type Search Keyword" (input)="onFilter($event)">
        </div>

        <!-- Search Button -->
        <button class="btn" type="button"
            style="background-color: #A6CE39; color: white;">
            <i class="fa fa-search"></i>
        </button>
    </div>

    <!-- Right Section: Action Buttons -->
    <div class="d-flex3 align-items-center ms-auto">
        <button class="btn me-2">Clear Filter</button>
        <button class="btn me-2">Bulk Edit</button>
        <button class="btn">Save Preferences</button>
    </div>
</div>

<kendo-grid
    [kendoGridBinding]="gridView"
    kendoGridSelectBy="record_id"
    [(selectedKeys)]="mySelection"
    [selectable]="{ mode: 'multiple', drag: false }"
    [pageSize]="20"
    [pageable]="true"
    [sortable]="true"
    [groupable]="false"
    [reorderable]="true"
    [resizable]="true"
    [height]="500"
    [excel]="{ fileName: 'Leads.xlsx' }"
    [columnMenu]="{ filter: true }">
    <kendo-grid-checkbox-column
        [width]="45"
        [headerClass]="{ 'text-center': true }"
        [class]="{ 'text-center': true }"
        [resizable]="false"
        [columnMenu]="false"
        [showSelectAll]="true">
    </kendo-grid-checkbox-column>

    <kendo-grid-column field="Action" title="Action" [width]="150">
        <ng-template kendoGridCellTemplate let-dataItem>
            <button class="btn btn-primary"
                (click)="onActionClick(dataItem)">Action</button>
        </ng-template>
    </kendo-grid-column>
    <kendo-grid-column field="record_id" title="Record Id" [width]="100">
        <ng-template kendoGridCellTemplate let-dataItem>
            <input type="text" [(ngModel)]="dataItem.record_id"
                class="form-control" />
        </ng-template>
    </kendo-grid-column>
    <kendo-grid-column field="last_name" title="Last Name" [width]="150">
        <ng-template kendoGridCellTemplate let-dataItem>
            <input type="text" [(ngModel)]="dataItem.last_name"
                class="form-control" />
        </ng-template>
    </kendo-grid-column>
    <kendo-grid-column field="first_name" title="First Name" [width]="150">
        <ng-template kendoGridCellTemplate let-dataItem>
            <input type="text" [(ngModel)]="dataItem.first_name"
                class="form-control" />
        </ng-template>
    </kendo-grid-column>
    <kendo-grid-column field="email" title="Email Address" [width]="200">
        <ng-template kendoGridCellTemplate let-dataItem>
            <input type="email" [(ngModel)]="dataItem.email"
                class="form-control" />
        </ng-template>
    </kendo-grid-column>
    <kendo-grid-column field="phone_type" title="Phone Type" [width]="120">
        <ng-template kendoGridCellTemplate let-dataItem>
            <input type="text" [(ngModel)]="dataItem.phone_type"
                class="form-control" />
        </ng-template>
    </kendo-grid-column>
    <kendo-grid-column field="lmp_id" title="LMP Lead Id" [width]="120">
        <ng-template kendoGridCellTemplate let-dataItem>
            <input type="text" [(ngModel)]="dataItem.lmp_id"
                class="form-control" />
        </ng-template>
    </kendo-grid-column>
    <kendo-grid-column field="appointment_type" title="Appointment Type"
        [width]="150">
        <ng-template kendoGridCellTemplate let-dataItem>
            <input type="text" [(ngModel)]="dataItem.appointment_type"
                class="form-control" />
        </ng-template>
    </kendo-grid-column>
    <kendo-grid-column field="booking_agency" title="Booking Agency"
        [width]="150">
        <ng-template kendoGridCellTemplate let-dataItem>
            <input type="text" [(ngModel)]="dataItem.booking_agency"
                class="form-control" />
        </ng-template>
    </kendo-grid-column>
    <kendo-grid-column field="assigned_date" title="Assigned Date"
        [width]="120">
        <ng-template kendoGridCellTemplate let-dataItem>
            <input type="date" [(ngModel)]="dataItem.assigned_date"
                class="form-control" />
        </ng-template>
    </kendo-grid-column>
    <kendo-grid-column field="sales_rep" title="Sales Rep" [width]="150">
        <ng-template kendoGridCellTemplate let-dataItem>
            <input type="text" [(ngModel)]="dataItem.sales_rep"
                class="form-control" />
        </ng-template>
    </kendo-grid-column>
    <kendo-grid-column field="coordinator" title="Coordinator" [width]="150">
        <ng-template kendoGridCellTemplate let-dataItem>
            <input type="text" [(ngModel)]="dataItem.coordinator"
                class="form-control" />
        </ng-template>
    </kendo-grid-column>
    <kendo-grid-column field="sync_to_mobile" title="Sync to Mobile"
        [width]="120">
        <ng-template kendoGridCellTemplate let-dataItem>
            <input type="checkbox" [(ngModel)]="dataItem.sync_to_mobile"
                class="form-check-input" />
        </ng-template>
    </kendo-grid-column>
    <kendo-grid-column field="created_sources" title="Created Sources"
        [width]="150">
        <ng-template kendoGridCellTemplate let-dataItem>
            <input type="text" [(ngModel)]="dataItem.created_sources"
                class="form-control" />
        </ng-template>
    </kendo-grid-column>
    <kendo-grid-column field="mobile_sync_status" title="Mobile Sync Status"
        [width]="150">
        <ng-template kendoGridCellTemplate let-dataItem>
            <input type="text" [(ngModel)]="dataItem.mobile_sync_status"
                class="form-control" />
        </ng-template>
    </kendo-grid-column>
    <kendo-grid-column field="effective_date" title="Effective Date"
        [width]="120">
        <ng-template kendoGridCellTemplate let-dataItem>
            <input type="date" [(ngModel)]="dataItem.effective_date"
                class="form-control" />
        </ng-template>
    </kendo-grid-column>
    <kendo-grid-column field="valid_through" title="Valid Through"
        [width]="120">
        <ng-template kendoGridCellTemplate let-dataItem>
            <input type="date" [(ngModel)]="dataItem.valid_through"
                class="form-control" />
        </ng-template>
    </kendo-grid-column>

    <!-- Move the Edit column to the right side of the page by placing it at the end -->
    <kendo-grid-column field="edit" title="Edit" [width]="170" [sticky]="true"
        class="d-flex">
        <ng-template kendoGridCellTemplate let-dataItem>
            <button class="btn btn-primary"
                *ngIf="dataItem.record_id; else saveButton"
                (click)="onEdit(dataItem)">Edit</button>
            <ng-template #saveButton>
                <button class="btn btn-success"
                    (click)="onSave(dataItem)">Save</button>
            </ng-template>
            <button class="btn btn-danger ms-2"
                (click)="onDelete(dataItem)">Delete</button>
        </ng-template>
    </kendo-grid-column>

</kendo-grid>